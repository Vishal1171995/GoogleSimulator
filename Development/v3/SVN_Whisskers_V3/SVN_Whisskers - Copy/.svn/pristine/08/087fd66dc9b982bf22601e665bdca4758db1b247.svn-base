$(document).ready(function () {
    var msg = "";
    $("#btnCreateCamp").click(function () {
        //alert("Handler for .click() called.");

        if ($("#txtCampaignName").val() == '') {
            alert("Please Enter Campaign Name");
            return false;
        }
        else if ($("#ddlNetwordType").val() == '0') {
            alert("Please Select Network Type");
            return false;
        }
        else if ($("#txtLocation").val() == '') {
            alert("Please Enter Location");
            return false;
        }
        else if ($("#txtBudget").val() == '') {
            alert("Please Enter Budget");
            return false;
        }
        else {
            return true;
        }
    });
    $("#ddlCampaign").change(function () {

        getCamp(this.value);

    });
    $("#ddlCampaignAD1").change(function () {

        getAdGroupsOnly(this.value);

    });
    $("#ddlCampaignAD").change(function () {

        getAdGroupsOnly(this.value);

    });
    $("#ddlADGroupName").change(function () {
        //  alert('sss');
        // getAdGroupsOnly(this.value);
        $("#hidADGName").val($("#ddlADGroupName option:selected").text());
        // alert(  $("#ddlADGroupName option:selected").text());
        // alert(this.is("selected").text());


    });
    $("#ddlCampaign2").change(function () {

        getAdGroups(this.value);

    });
    $("#ddlCampaignAD1").change(function () {

        getAds(this.value, 'ALL');
    });
    $("#ddlADGroupName1").change(function () {


        getAds($("#ddlCampaignAD1").val(), this.value);
    });
    getAllCamp();
});


function getCamp(cCode) {
    var htmlcontent = "";
    $('#div_result').empty();
    $.ajax({
        url: "/Students/Home/GetCampaignData?cCode=" + cCode + "",

        method: 'GET',

        //data: { cCode: '1' },
        success: function (data) {

            htmlcontent = '<div class="row">' +

                               '<div class="col-md-12">' +
                                '<div class="campaings-table-border table-responsive">' +
                                '<table>' +
                                '<tr>' +
                                '<th>Campaigns</th>' +
                                '<th>Budget</th>' +
                                '<th>Status</th>' +
                                '<th>Impressions</th>' +
                                '<th>Clicks</th>' +
                                '<th>CTR </th>' +
                                '<th>Cost</th>' +
                                '<th>Avg CPC</th>' +
                                '<th>Conversions</th>' +
                                '<th>Cost Per Conversion</th>' +
                                '</tr>';


            $.each(data, function (i, item) {

                htmlcontent += '<tr><td><a href=\'javascript:void(0)\' onclick="getgroup(\'' + item.CampaignCode + '\');" >' + item.CampaignName + '</a></td>' +
                                '<td>' + item.Budget + '</td>' +
                                "<td></td>" +
                                '<td></td>' +
                                '<td></td>' +
                                '<td></td>' +
                                '<td></td>' +
                                '<td></td>' +
                                '<td></td>' +
                                '<td></td></tr>	';


            });
        }, async: false,

        error: function (data) {

        }
    });
    htmlcontent += '</table></div></div></div>';
    $('#div_result').html(htmlcontent);

}

//Start Trainer Block
function getCurrentBatches(cCode) {
    $('#h1Batch').empty();
    if (cCode == 'c')
        $('#h1Batch').text("Current Batches");
    if (cCode == 'f')
        $('#h1Batch').text("Future Batches");
    var htmlcontent = "";
    $('#div_result1').empty();
    $.ajax({
        url: "/Trainers/Home/GetCurrentBatchesData?cCode=" + cCode + "",
        method: 'GET',
        cache: false,
        success: function (data) {
            htmlcontent = '<div class="campaigns-tab">' + '<div class="container">' + '<div class="row">' +
            '<div class="col-md-12">' +
                                '<div class="campaings-table-border table-responsive">' +
                                '<table id="tableBatch">' +
                                '<thead><tr>' +
                                '<th>Batches</th>' +
                                '<th>Office</th>' +
                                '<th>Address</th>' +
                                '<th>Start Date</th>' +
                                '<th>End Date</th>' +
                                //'<th>Time </th>' +
                                '<th></th>' +
                                '</thead></tr><tbody>';
            $.each(data, function (i, item) {
                htmlcontent += '<tr><td><a id ="' + item.BatchCode + '" href="/Trainers/Home/CreateAccount/' + item.BatchCode + '">' + item.BatchName + '</a></td>' +
                                '<td>' + item.Location + '</td>' +
                                '<td>' + item.Address + '</td>' +
                                '<td>' + item.StartDate + '</td>' +
                                '<td>' + item.EndDate + '</td>' +
                                //'<td>' + item.Time + '</td>' +
                                '<td><a href="/Trainers/Home/CreateAccount/' + item.BatchCode + '");" >View</a></td>';
            });
            htmlcontent += '</tbody></table></div></div></div></div></div>';
            $('#div_result1').html(htmlcontent);
            BatchDataTable();
        }, async: true,
        error: function (data) {
            alert("Error is : " + data);
        }
    });

}
function GetAllAccountDetails(accCode) {
    var htmlcontent = "";
    $('#AllAccounts').empty();
    $.ajax({
        url: "/Trainers/Home/GetAllAccountDetails?cCode=" + accCode + "",
        method: 'GET',
        cache: false,
        //data: { cCode: '1' },
        success: function (data) {
            htmlcontent = '<div id="AllAccounts1" class="panel-body">' + '<ul>';
            $.each(data, function (i, item) {
                htmlcontent += '<li><a id="' + item.AccCode + '"><div class="logo-img-scroll"><img src="' + item.ImagePath + '" alt="amazone" /> <span>' + item.AccName + '</span></div> <div class="clearfix"></div></a></li>';
            });
        }, async: false,

        error: function (data) {
            alert("Error is : " + data);
        }
    });
    htmlcontent += '</ul></div>';
    $('#AllAccounts').html(htmlcontent);
}
function GetAllBatches(BatchCode) {
    var htmlcontentStudent = "";
    var htmlcontentAccount = "";
    var htmlcontentSavedAccount = "";

    $('#ddlBatch').empty();
    $('#StudentPerBatch1').empty();
    //$('#ddlBatch').append($('<option></option>').val("").html("Choose Batch"));
    $.ajax({
        url: "/Trainers/Home/GetAllBatches?BatchCode=" + BatchCode + "",
        method: 'GET',
        cache: false,
        success: function (data) {
            //Binding Dropdown list
            $.each(data[0], function (i, item) {
                
                if (item.BatchCode == data[1].BatchCode) {
                    $('#ddlBatch').append($('<option selected></option>').val(item.BatchCode).html(item.BatchName));
                }
                else {
                    $('#ddlBatch').append($('<option></option>').val(item.BatchCode).html(item.BatchName));
                }
            });

            //Binding Account list
            htmlcontentAccount = '<ul>';
            if (data[3] == '') {
                htmlcontentAccount += '<span>No Data is Present</span>';
            }
            $.each(data[3], function (i, item) {
                htmlcontentAccount += '<li><a id="' + item.AccCode + '"><div class="logo-img-scroll  col-left"><img src="' + item.ImagePath + '" alt="amazone" /> <span>' + item.AccFullName + '</span></div> <div class="clearfix"></div></a></li>';
            });

            //Binding Student list
            htmlcontentStudent = '<ul>';
            if (data[2] == '') {
                htmlcontentStudent += '<span>No Data is Present</span>';
                $("#aResetAccount").addClass("hidden");
                $("#btnSaveDraft").addClass("hidden1");
            }
            $.each(data[2], function (i, item) {
                $("#aResetAccount").removeClass("hidden");
                $("#btnSaveDraft").removeClass("hidden1");
                htmlcontentStudent += '<li><a id="' + item.UserID + '">' + item.StudentFirstName + '</a></li>';
            });

            //Binding Batch basic Details list
            $('#spnBatchNam').text(data[1].BatchName);
            $('#spnLocation').text(data[1].Location);
            $('#spnTrainerNam').text(data[1].TrainerName);
            $('#spnStartDate').text(data[1].StartDate);
            $('#spnTime').text(data[1].Time);

            //Binding Saved Account Details
            $.each(data[4], function (i, item) {
                htmlcontentSavedAccount += ' <div class=" col-md-12">' +
                    '<div class=" col-border">' +
                        '<div id="' + item.AccCode + '" class="col-md-4">' +
                           '<div class="logo-img col-left"><img src="' +
                           item.ImagePath + '" class="img-responsive"'
                + 'alt="image" /></div>' +
                            '<div class="col-right">' +
                            item.AccFullName + '</div></div>' +
                        '<div class="col-md-8  col-border-left">' +

                            '<div class="student-col">' +
                                '<div class="col-icon"><img src="/Content/images/trainer/group-icon.png" alt="icon" />' +
                                '</div>' +
                                '<div id= "' + item.AccCode + '"class="col-icon-right text-right">' +
                                    '<ul>';
                if (item.rfaId != 0)
                {
                    htmlcontentSavedAccount += '<li><button id="btnFinalSubmit" class="button btn-float" onclick="CancelAuction(' + "'" + item.rfaId + "','" + item.BatchCode + "','" + item.AccCode + "'" + ');">Cancel Request</button></li>';
                }
                if (item.Status == 0)
                {
                    htmlcontentSavedAccount += '<li><i class="fa fa-save" aria-hidden="true" style="color:#ff975a; font-size:22px;"></i>' + '</li>' +
                    '<li><a id="' + item.BatchCode + '"  onclick="EditAccountDetails(' + "'" + item.BatchCode + "'" + ",'" + item.AccCode + "'" + ');"><img src="/Content/images/trainer/edit-icon.png" alt="Edit"/></a></li>' +
                    '<li><a onclick="DeleteAccountDetails(' + "'" + item.BatchCode + "'" + ",'" + item.AccCode + "'" + ');"><img src="/Content/images/trainer/cancel-icon.png" alt="Cancel" /></a></li>';
                }
                if (item.Status == 1)
                {
                    htmlcontentSavedAccount += '<li><div class="lblGray">Submitted</div>' +
                    '</li>';
                }
                htmlcontentSavedAccount += '</ul>' +
            '</div>' +
            '<div class="clearfix"></div>' +
        '</div>' +
        '<p>' + item.UserNames + '</p>' +
    '</div>' +

    '<div class="clearfix"></div>' +
'</div>' +
'</div>';
            });
        }, async: false,
        error: function (data) {
            alert("I am error in batches")
        }
    });

    htmlcontentAccount += '</ul>';
    $('#AllAccounts1').html(htmlcontentAccount);

    htmlcontentStudent += '</ul></div>';
    $('#StudentPerBatch1').html(htmlcontentStudent);
    $('#SavedAcountDetails').html(htmlcontentSavedAccount);

    AccountSelection();
    StudentSelection();

    $("#btnUpdateDraft").addClass("hidden");
    $("#btnSaveDraft").removeClass("hidden");
    $("#btnFinalSubmit").removeClass("hidden");
    $('#StudentsCount').text("You have select only " + 0);
    $("#aResetAccount").text('Reset');
    $("#hdnResetAccount").val(BatchCode);
    //$('#aResetAccount').on('click', GetAllBatches(BatchCode));
    //  $('#aResetAccount').click(GetAllBatches(BatchCode));
}
function StudentSelection() {
    $("#StudentPerBatch1 ul li").click(function () {
        if ($(this).hasClass("active")) {
            $(this).toggleClass("active");
            //alert("active to toggle");
        }
        else if ($('#StudentPerBatch1 li.active').length < 5) {
            //alert("unactive to active");
            $(this).toggleClass("active");
        }
        else {
            alert('Only 5 Students are allowed');
        }
        $('#StudentsCount').text("You have select only " + $('#StudentPerBatch1 li.active').length);
        //alert($("#StudentPerBatch1 li.active").children().attr('id'));
        //$("#StudentPerBatch1 li.active").children().each(function () {
        //    alert("Focused Elem_id = " + this.id);
        //});
    });
}
function AccountSelection() {
    $("#AllAccounts1 ul li").click(function () {
        if ($(this).hasClass("active")) {
            $(this).toggleClass("active");
            //alert("active to toggle");
        }
        else if ($('#AllAccounts1 li.active').length < 1) {
            //alert("unactive to active");
            $(this).toggleClass("active");
        }
        else {
            alert('Only 1 Account is allowed');
        }
    });
}
function SaveAccount(StatusCode) {
    var selectedStudent = "";
    var selectedAccount = "";
    if ($('#StudentPerBatch1 li.active').length > 0) {
        $("#StudentPerBatch1 li.active").children().each(function () {
            selectedStudent += this.id + ",";
        });
        // alert(selectedStudent);
    }
    if ($('#AllAccounts1 li.active').length > 0) {
        $("#AllAccounts1 li.active").children().each(function () {
            selectedAccount += this.id + ",";
        });
        // alert(selectedAccount);
    }
    if (selectedStudent == '' || selectedAccount == '') {
        alert('Select atleast one Student with one account');
    }
    else {

        //var json = JSON.stringify(SelectedData);
        var SelectedData = JSON.stringify({
            'AccountDetails': selectedAccount,
            'StudentDetails': selectedStudent,
            'Status': StatusCode,
        });
        //alert(SelectedData);
        $.ajax({
            //url: "/Trainers/Home/SaveAccount?SelectedData=" + json + "",
            url: "/Trainers/Home/SaveAccount",
            method: 'POST',
            cache: false,
            contentType: 'application/json; charset=utf-8',
            data: SelectedData,
            dataType: "json",
            success: function (data) {
                alert("Submitted Successfully");
                GetAllBatches($("#ddlBatch option:selected").val());
            }, async: false,

            error: function (data) {
                alert("Error is : " + data);
            }
        });
    }

    //-------------Start Sample Syntax------------
    //alert("Focused Elem_id = " + this.id);
    //alert($("#AllAccounts1 li.active").children(":first").attr('id'));
    //alert($("#AllAccounts1 li.active").children(":first").attr('id'));
    //---------------End Sample Syntax---------
}
function FSaveAccount(StatusCode) {
    if (confirm("Are you sure you want to continue...?")) {
        //var json = JSON.stringify(SelectedData);
        var SelectedData = JSON.stringify({
            'Status': StatusCode,
            'BatchCode': $('#ddlBatch').val(),
        });
        //alert(SelectedData);
        $.ajax({
            //url: "/Trainers/Home/SaveAccount?SelectedData=" + json + "",
            url: "/Trainers/Home/FSaveAccount",
            method: 'POST',
            cache: false,
            contentType: 'application/json; charset=utf-8',
            data: SelectedData,
            dataType: "json",
            success: function (data) {
                if (data == true) {
                    alert("Final Submitted Successfully");
                    GetAllBatches($("#ddlBatch option:selected").val());
                }
                if (data == false) {
                    alert("No data is present to submit");
                }
            }, async: false,
            error: function (data) {
                alert("Error is : " + data);
            }
        });
    }
}
function EditAccountDetails(BatchCode, AccCode) {
    var StudentCount = 0;
    var htmlcontentAccount = "";
    var htmlcontentSavedAccount = "";
    var SelectedData = JSON.stringify({
        'BatchCode': BatchCode,
        'AccCode': AccCode,
    });
    $('#StudentPerBatch1').empty();
    $.ajax({
        url: "/Trainers/Home/EditAccountDetails",
        method: 'POST',
        cache: false,
        contentType: 'application/json; charset=utf-8',
        data: SelectedData,
        dataType: "json",
        success: function (data) {
            BindStudentList(data[2]);
            BindAccountList(data[3]);
        }, async: false,
        error: function (data) {
            alert("I am error in batches")
        }
    });
    StudentCount = $('#StudentPerBatch1 li.active').length
    AccountSelection();
    StudentSelection();
    $('#StudentsCount').text("You have select only " + StudentCount);
    $("#btnUpdateDraft").removeClass("hidden");
    $("#btnSaveDraft").addClass("hidden");
    $("#btnUpdateDraft").removeClass("hidden");
    $("#btnFinalSubmit").addClass("hidden");
    $("#aResetAccount").removeClass("hidden");
    $("#aResetAccount").text('Cancel');
    $("#hdnResetAccount").val(BatchCode);
    //$('#aResetAccount').on('click', GetAllBatches(BatchCode));
    //$('#aResetAccount').click(GetAllBatches(BatchCode));
}
function UpdateAccount(StatusCode) {
    var selectedStudent = "";
    var selectedAccount = "";
    if ($('#StudentPerBatch1 li.active').length > 0) {
        $("#StudentPerBatch1 li.active").children().each(function () {
            selectedStudent += this.id + ",";
        });
        // alert(selectedStudent);
    }
    if ($('#AllAccounts1 li.active').length > 0) {
        $("#AllAccounts1 li.active").children().each(function () {
            selectedAccount += this.id + ",";
        });
        // alert(selectedAccount);
    }
    if (selectedStudent == '' || selectedAccount == '') {
        alert('Select atleast one Student with one account');
    }
    else {

        //var json = JSON.stringify(SelectedData);
        var SelectedData = JSON.stringify({
            'AccountDetails': selectedAccount,
            'StudentDetails': selectedStudent,
            'Status': StatusCode,
        });
        //alert(SelectedData);
        $.ajax({
            //url: "/Trainers/Home/SaveAccount?SelectedData=" + json + "",
            url: "/Trainers/Home/UpdateAccount",
            method: 'POST',
            cache: false,
            contentType: 'application/json; charset=utf-8',
            data: SelectedData,
            dataType: "json",
            success: function (data) {
                alert("Updated Successfully");
                GetAllBatches($("#ddlBatch option:selected").val());
            }, async: false,

            error: function (data) {
                alert("Error is : " + data);
            }
        });
    }

    //-------------Start Sample Syntax------------
    //alert("Focused Elem_id = " + this.id);
    //alert($("#AllAccounts1 li.active").children(":first").attr('id'));
    //alert($("#AllAccounts1 li.active").children(":first").attr('id'));
    //---------------End Sample Syntax---------
}
function DeleteAccountDetails(BatchCode, AccCode) {
    if (confirm("Are you sure you want to continue...?")) {

        var SelectedData = JSON.stringify({
            'BatchCode': BatchCode,
            'AccCode': AccCode,
        });
        $.ajax({
            url: "/Trainers/Home/DeleteAccountDetails",
            method: 'POST',
            cache: false,
            contentType: 'application/json; charset=utf-8',
            data: SelectedData,
            dataType: "json",
            success: function (data) {
                alert("Deleted Successfully");
                GetAllBatches($("#ddlBatch option:selected").val());
            }, async: false,
            error: function (data) {
                alert("I am error in batches");
            }
        });
    }
}
function BindStudentList(data) {
    //Binding Student list
    var htmlcontentStudent = "";
    htmlcontentStudent = '<ul>';
    if (data == '') {
        htmlcontentStudent += '<span>No Data is Present</span>';
    }
    $.each(data, function (i, item) {
        if (item.AccCode == null) {
            htmlcontentStudent += '<li><a id="' + item.UserID + '">' + item.StudentFirstName + '</a></li>';
        }
        else {
            htmlcontentStudent += '<li class="active"><a id="' + item.UserID + '">' + item.StudentFirstName + '</a></li>';
        }
    });
    htmlcontentStudent += '</ul></div>';
    $('#StudentPerBatch1').html(htmlcontentStudent);
}
function BindAccountList(data) {
    //Binding Account list
    var htmlcontentAccount = "";
    htmlcontentAccount = '<ul>';
    if (data == '') {
        htmlcontentAccount += '<span>No Data is Present</span>';
    }
    $.each(data, function (i, item) {
        htmlcontentAccount += '<li class="active"><a id="' + item.AccCode + '"><div class="logo-img-scroll col-left"><img src="' + item.ImagePath + '" alt="amazone" /> <span>' + item.AccFullName + '</span></div> <div class="clearfix"></div></a></li>';
    });
    htmlcontentAccount += '</ul>';
    $('#AllAccounts1').html(htmlcontentAccount);
}
function CancelAuction(rfaId, BatchCode, AccCode)
{
    if (confirm("Are you sure you want to continue...?")) {
        var SelectedData = JSON.stringify({
            'rfaId': rfaId,
            'BatchCode': BatchCode,
            'AccCode': AccCode,
        });
        //alert(SelectedData);
        $.ajax({
            //url: "/Trainers/Home/SaveAccount?SelectedData=" + json + "",
            url: "/Trainers/Home/CancelAuction",
            method: 'POST',
            cache: false,
            contentType: 'application/json; charset=utf-8',
            data: SelectedData,
            dataType: "json",
            success: function (data) {
                if (data == true) {
                    alert("Request Canceled Successfully");
                    GetAllBatches($("#ddlBatch option:selected").val());
                }
                if (data == false) {
                }
            }, async: false,
            error: function (data) {
                alert("Error is : " + data);
            }
        });
    }
}

//Report Section

//Report Section
function GetBatchDropdown() {

    $('#ddlBatchReport').empty();
    $.ajax({
        url: "/Trainers/Report/GetBatchDropdown",
        method: 'GET',
        cache: false,
        success: function (data) {
            //Binding Dropdown list
            $.each(data[0], function (i, item) {
                if (i == 0)
                    $('#ddlBatchReport').append($('<option selected></option>').val(item.BatchCode).html(item.BatchName));
                else {
                    $('#ddlBatchReport').append($('<option></option>').val(item.BatchCode).html(item.BatchName));
                }
            });
        }, async: false,
        error: function (data) {
            //alert("I am error in batches")
        }
    });
}
function GetAccountReport(BatchCode) {


    var htmlAcccontent = "";
    var htmlAcccontent1 = "";
    var htmlAcccontent2 = "";
    //var htmlAcccontent3 = "";
    $('#div_resultAccRpt').empty();
    $('#div_resultAccCampRpt').empty();
    $('#div_resultAccAdGrpRpt').empty();
    //$('#div_resultAccAdsRpt').empty();

    if (BatchCode == '') {
        BatchCode = $('#ddlBatchReport').val();
    }
    $.ajax({
        url: "/Trainers/Report/GetAccountReport?BatchCode=" + BatchCode + "",
        method: 'GET',
        cache: false,
        success: function (data) {
            //Binding Batch basic Details list
            $('#spnBatchNamReport').text(data[0].BatchName);
            $('#spnLocationReport').text(data[0].Location);
            $('#spnTrainerNamReport').text(data[0].TrainerName);
            $('#spnStartDateReport').text(data[0].StartDate);


            //Binding Account Details
            htmlAcccontent = '<div class="row">' +
                '<div class="col-md-12">' +
                 '<div class="campaings-table-border table-responsive">' +
                 '<table id="tbl_resultAccRpt">' +
                 '<tr>' +
                 '<th>Acc Name</th>' +
                 '<th>Budget</th>' +
                 '<th>Impressions</th>' +
                 '<th>Clicks</th>' +
                 '<th>CTR</th>' +
                  '<th>Cost</th>' +
                 '<th>Avg CPC </th>' +
                 '<th>Conversions</th>' +
                 '<th>Cost Per Conversion</th>' +
                 '</tr>';
            $.each(data[1], function (i, item) {
                htmlAcccontent += '<tr><td><a href=#" >' + item.AccName + '</a></td>' +
                                '<td>' + item.Budget + '</td>' +
                                 '<td>' + item.Impressions + '</td>' +
                                 '<td>' + item.Clicks + '</td>' +
                                 '<td>' + item.CTR + '</td>' +
                                 '<td>' + item.COST + '</td>' +
                                 '<td>' + item.CPC + '</td>' +
                                 '<td>' + item.Conversions + '</td>' +
                                 '<td>' + item.CostPerConversion + '</td>';
                //'<td></td>' +
                ////'<td><a href="#" class="popup-btn" data-toggle="modal" data-target="#myModalEdit"  onclick="getEditCamp(\'' + item.CampaignCode + '\');"><img src="/Content/images/plus-icon.png" alt="icon" />Edit</a></td></tr>	';
                //'<td><a href="#"  data-toggle="modal" data-target="#myModal"  onclick="getEditCamp(\'' + item.BatchCode + '\');"><img src="/Content/images/student/edit-icon.png" alt="delete" /></a></td></tr>	';

            });

            //Binding Campaign Details
            htmlAcccontent1 = '<div class="row">' +
                '<div class="col-md-12">' +
                 '<div class="campaings-table-border table-responsive">' +
                 '<table id="tbl_resultAccCampRpt">' +
                 '<tr>' +
                 '<th>Campaign Name</th>' +
                 '<th>Budget</th>' +
                 '<th>Impressions</th>' +
                 '<th>Clicks</th>' +
                 '<th>CTR</th>' +
                  '<th>Cost</th>' +
                 '<th>Avg CPC </th>' +
                 '<th>Conversions</th>' +
                 '<th>Cost Per Conversion</th>' +
                 '</tr>';
            $.each(data[2], function (i, item) {
                htmlAcccontent1 += '<tr><td><a href=#" >' + item.CampaignName + '</a></td>' +
                                '<td>' + item.Budget + '</td>' +
                                 '<td>' + item.Impressions + '</td>' +
                                 '<td>' + item.Clicks + '</td>' +
                                 '<td>' + item.CTR + '</td>' +
                                 '<td>' + item.COST + '</td>' +
                                 '<td>' + item.CPC + '</td>' +
                                 '<td>' + item.Conversions + '</td>' +
                                 '<td>' + item.CostPerConversion + '</td>';
                //'<td></td>' +
                ////'<td><a href="#" class="popup-btn" data-toggle="modal" data-target="#myModalEdit"  onclick="getEditCamp(\'' + item.CampaignCode + '\');"><img src="/Content/images/plus-icon.png" alt="icon" />Edit</a></td></tr>	';
                //'<td><a href="#"  data-toggle="modal" data-target="#myModal"  onclick="getEditCamp(\'' + item.BatchCode + '\');"><img src="/Content/images/student/edit-icon.png" alt="delete" /></a></td></tr>	';

            });

            //Binding Campaign Details
            htmlAcccontent2 = '<div class="row">' +
                '<div class="col-md-12">' +
                 '<div class="campaings-table-border table-responsive">' +
                 '<table id="tbl_resultAccAdGrpRpt">' +
                 '<tr>' +
                 '<th>Campaign Name</th>' +
                 '<th>Adgroup Name</th>' +
                 '<th>Budget</th>' +
                 '<th>Impressions</th>' +
                 '<th>Clicks</th>' +
                 '<th>CTR</th>' +
                  '<th>Cost</th>' +
                 '<th>Avg CPC </th>' +
                 '<th>Conversions</th>' +
                 '<th>Cost Per Conversion</th>' +
                 '</tr>';
            $.each(data[3], function (i, item) {
                htmlAcccontent2 += '<tr><td><a href=#" >' + item.CampaignName + '</a></td>' +
                                '<td>' + item.AdGroupName + '</td>' +
                                '<td>' + item.Budget + '</td>' +
                                 '<td>' + item.Impressions + '</td>' +
                                 '<td>' + item.Clicks + '</td>' +
                                 '<td>' + item.CTR + '</td>' +
                                 '<td>' + item.COST + '</td>' +
                                 '<td>' + item.CPC + '</td>' +
                                 '<td>' + item.Conversions + '</td>' +
                                 '<td>' + item.CostPerConversion + '</td>';
                //'<td></td>' +
                ////'<td><a href="#" class="popup-btn" data-toggle="modal" data-target="#myModalEdit"  onclick="getEditCamp(\'' + item.CampaignCode + '\');"><img src="/Content/images/plus-icon.png" alt="icon" />Edit</a></td></tr>	';
                //'<td><a href="#"  data-toggle="modal" data-target="#myModal"  onclick="getEditCamp(\'' + item.BatchCode + '\');"><img src="/Content/images/student/edit-icon.png" alt="delete" /></a></td></tr>	';

            });

            //Binding Campaign Details
            //htmlAcccontent3 = '<div class="row">' +
            //    '<div class="col-md-12">' +
            //     '<div class="campaings-table-border table-responsive">' +
            //     '<table id="tbl_resultAccCampRpt">' +
            //     '<tr>' +
            //     '<th>Acc Name</th>' +
            //     '<th>Budget</th>' +
            //     '<th>Impressions</th>' +
            //     '<th>Clicks</th>' +
            //     '<th>CTR</th>' +
            //      '<th>Cost</th>' +
            //     '<th>Avg CPC </th>' +
            //     '<th>Conversions</th>' +
            //     '<th>Cost Per Conversion</th>' +
            //     '</tr>';
            //$.each(data[4], function (i, item) {
            //    htmlAcccontent3 += '<tr><td><a href=#" >' + item.AccName + '</a></td>' +
            //                    '<td>' + item.Budget + '</td>' +
            //                     '<td>' + item.Impressions + '</td>' +
            //                     '<td>' + item.Clicks + '</td>' +
            //                     '<td>' + item.CTR + '</td>' +
            //                     '<td>' + item.COST + '</td>' +
            //                     '<td>' + item.CPC + '</td>' +
            //                     '<td>' + item.Conversions + '</td>' +
            //                     '<td>' + item.CostPerConversion + '</td>';
            //    //'<td></td>' +
            //    ////'<td><a href="#" class="popup-btn" data-toggle="modal" data-target="#myModalEdit"  onclick="getEditCamp(\'' + item.CampaignCode + '\');"><img src="/Content/images/plus-icon.png" alt="icon" />Edit</a></td></tr>	';
            //    //'<td><a href="#"  data-toggle="modal" data-target="#myModal"  onclick="getEditCamp(\'' + item.BatchCode + '\');"><img src="/Content/images/student/edit-icon.png" alt="delete" /></a></td></tr>	';

            //});

        }, async: false,
        error: function (data) {
            alert("I am error in batches")
        }
    });
    htmlAcccontent += '</table></div></div></div>';
    $('#div_resultAccRpt').html(htmlAcccontent);

    htmlAcccontent1 += '</table></div></div></div>';
    $('#div_resultAccCampRpt').html(htmlAcccontent1);

    htmlAcccontent2 += '</table></div></div></div>';
    $('#div_resultAccAdGrpRpt').html(htmlAcccontent2);

    //htmlAcccontent3 += '</table></div></div></div>';
    //$('#div_resultAccRpt').html(htmlAcccontent3);
    //div_resultAccCampRpt
    //div_resultAccAdGrpRpt
    //div_resultAccAdsRpt
}

function GetIndustryReport(BatchCode) {


    var htmlAcccontent = "";
    var htmlAcccontent1 = "";
    var htmlAcccontent2 = "";

    //var htmlAcccontent3 = "";

    $('#div_rptkey').empty();
    $('#div_IndCampRpt').empty();
    $('#div_IndAccRpt').empty();

    //$('#div_resultAccAdsRpt').empty();

    if (BatchCode == '') {
        BatchCode = $('#ddlBatchReport').val();
    }

    $.ajax({
        url: "/Trainers/Report/GetIndustryReport?BatchCode=" + BatchCode + "",
        method: 'GET',
        cache: false,
        success: function (data) {



            //Binding Keyword Details
            htmlAcccontent = '<div class="row">' +
                '<div class="col-md-12">' +
                 '<div class="campaings-table-border table-responsive">' +
                 '<table id="tbl_resultkeyRpt">' +
                 '<tr>' +
                 '<th>S.No</th>' +
                 '<th>Keyword</th>' +
                 '<th>Impression Shares</th>' +
                 '<th></th>' +
                 '</tr>';
            $.each(data[0], function (i, item) {
                htmlAcccontent += '<tr><td>' + (parseInt(i) + 1) + '</td>' +
                                '<td>' + item.KeyName + '</td>' +
                                 '<td>' + item.ImpressionShare + '</td>' +
                                 '<td></td></tr>';


            });

            var Budget = 0;
            var Imps = 0;
            var Clicks = 0;
            var CTR = 0;
            var Cost = 0;
            var CPC = 0;
            var cnver = 0;
            var CostCpc = 0;
            var CountCamp = 0;
            //Binding Campaign Matrix Details
            htmlAcccontent1 = '<div class="row">' +
                '<div class="col-md-12">' +
                 '<div class="campaings-table-border table-responsive">' +
                 '<table id="tbl_resultIndCampRpt">' +
                 '<tr>' +
                 '<th>Campaign Name</th>' +
                 '<th>Budget</th>' +
                 '<th>Impressions</th>' +
                 '<th>Clicks</th>' +
                 '<th>CTR</th>' +
                  '<th>Cost</th>' +
                 '<th>Avg CPC </th>' +
                 '<th>Conversions</th>' +
                 '<th>Cost Per Conversion</th>' +
                 '</tr>';
            $.each(data[1], function (i, item) {
                CountCamp = data[1].length;
                htmlAcccontent1 += '<tr><td><a href=#" >' + item.CampaignName + '</a></td>' +
                                '<td>' + item.Budget + '</td>' +
                                 '<td>' + item.Impressions + '</td>' +
                                 '<td>' + item.Clicks + '</td>' +
                                 '<td>' + item.CTR + '</td>' +
                                 '<td>' + item.COST + '</td>' +
                                 '<td>' + item.CPC + '</td>' +
                                 '<td>' + item.Conversions + '</td>' +
                                 '<td>' + item.CostPerConversion + '</td></tr>';

                Budget += parseInt(item.Budget);
                Imps += parseInt(item.Impressions);
                Clicks += parseInt(item.Clicks);
                CTR += parseInt(item.CTR);
                Cost += parseInt(item.COST);
                CPC += parseInt(item.CPC);
                cnver += parseInt(item.Conversions);
                CostCpc += parseInt(item.CostPerConversion);

            });

            htmlAcccontent1 += '<tr><td><b>Total</b></td>' +
                                '<td>' + Budget + '</td>' +
                                 '<td>' + Imps + '</td>' +
                                 '<td>' + Clicks + '</td>' +
                                 '<td>' + CTR + '</td>' +
                                 '<td>' + Cost + '</td>' +
                                 '<td>' + CPC + '</td>' +
                                 '<td>' + cnver + '</td>' +
                                 '<td>' + CostCpc + '</td></tr>';

            htmlAcccontent1 += '<tr><td><b>Avg</b></td>' +
                              '<td>' + Budget / CountCamp + '</td>' +
                               '<td>' + Imps / CountCamp + '</td>' +
                               '<td>' + Clicks / CountCamp + '</td>' +
                               '<td>' + CTR / CountCamp + '</td>' +
                               '<td>' + Cost / CountCamp + '</td>' +
                               '<td>' + CPC / CountCamp + '</td>' +
                               '<td>' + cnver / CountCamp + '</td>' +
                               '<td>' + CostCpc / CountCamp + '</td></tr>';

            //Binding Account Details
            htmlAcccontent2 = '<div class="row">' +
                '<div class="col-md-12">' +
                 '<div class="campaings-table-border table-responsive">' +
                 '<table id="tbl_resultIndAccRpt">' +
                 '<tr>' +
                 '<th>Accounts</th>' +
                 '<th>Budget</th>' +
                 '<th>Impressions</th>' +
                 '<th>Clicks</th>' +
                 '<th>CTR</th>' +
                  '<th>Cost</th>' +
                 '<th>Avg CPC </th>' +
                 '<th>Conversions</th>' +
                 '<th>Cost Per Conversion</th>' +
                 '</tr>';
            $.each(data[2], function (i, item) {
                htmlAcccontent2 += '<tr><td><a href=#" >' + item.AccName + '</a></td>' +
                                '<td>' + item.Budget + '</td>' +
                                 '<td>' + item.Impressions + '</td>' +
                                 '<td>' + item.Clicks + '</td>' +
                                 '<td>' + item.CTR + '</td>' +
                                 '<td>' + item.COST + '</td>' +
                                 '<td>' + item.CPC + '</td>' +
                                 '<td>' + item.Conversions + '</td>' +
                                 '<td>' + item.CostPerConversion + '</td></tr>';

            });



        }, async: false,
        error: function (data) {
            alert("I am error in batches")
        }
    });
    htmlAcccontent += '</table></div></div></div>';
    $('#div_rptkey').html(htmlAcccontent);

    htmlAcccontent1 += '</table></div></div></div>';
    $('#div_IndCampRpt').html(htmlAcccontent1);

    htmlAcccontent2 += '</table></div></div></div>';
    $('#div_IndAccRpt').html(htmlAcccontent2);


}
//End Trainer Block

function getgroup(cCode) {

    location.href = "/Students/Home/Index#adgroups#" + cCode + "";
    location.reload();
    return true;
}

function getAllCamp() {

    var htmlcontent = "";
    $('#ddlCampaign').empty();
    $('#ddlCampaign2').empty();
    $('#ddlCampaignADGM').empty();
    $('#ddlCampaignAD1').empty();
    $('#ddlCampaignAD').empty();


    $('#ddlCampaign').append($('<option></option>').val("ALL").html("ALL Campaigns"));
    $('#ddlCampaign2').append($('<option></option>').val("ALL").html("ALL Campaigns"));
    $('#ddlCampaignADGM').append($('<option></option>').val("ALL").html("ALL Campaigns"));
    $('#ddlCampaignAD1').append($('<option></option>').val("ALL").html("Select Campaign"));
    $('#ddlCampaignAD').append($('<option></option>').val("ALL").html("ALL Campaigns"));
    $.ajax({
        url: "/Students/Home/GetCampaigns",
        method: 'GET',

        //data: { cCode: '1' },
        success: function (data) {




            $.each(data, function (i, item) {

                $('#ddlCampaign').append($('<option></option>').val(item.CampaignCode).html(item.CampaignName));
                $('#ddlCampaign2').append($('<option></option>').val(item.CampaignCode).html(item.CampaignName));
                $('#ddlCampaignADGM').append($('<option></option>').val(item.CampaignCode).html(item.CampaignName));
                $('#ddlCampaignAD1').append($('<option></option>').val(item.CampaignCode).html(item.CampaignName));
                $('#ddlCampaignAD').append($('<option></option>').val(item.CampaignCode).html(item.CampaignName));


            });
        }, async: false,

        error: function (data) {

        }
    });



}
function getAdGroups(cCode) {

    var htmlcontent = "";
    var htmlcontentRow = "";
    $('#ADGroup_Result').empty();

    $.ajax({
        url: "/Students/Home/GetADGroupsData?cCode=" + cCode + "",
        method: 'GET',

        //data: { cCode: '1' },
        success: function (data) {

            htmlcontent = '<div class="row">' +
             '<div class="col-md-12">' +

               '<div class="campaings-table">' +

                   '<div class="panel-group" id="accordion">';


            var tempCampaign = '';
            var tempADGroup = '';
            var colapsCtr = 0;
            $.each(data, function (i, item) {
                if (tempCampaign != item.CampaignName && colapsCtr != 0) {
                    htmlcontent += '</table></div></div></div>';
                    htmlcontent += '</div>';
                    // tempCampaign = item.CampaignName;
                    htmlcontentRow = '';
                }
                if (tempCampaign != item.CampaignName) {
                    tempCampaign = item.CampaignName;
                    colapsCtr++;
                    htmlcontent += '<div class="panel panel-default">';
                    if (colapsCtr == 1) {
                        htmlcontent += '<div class="panel-heading active-panel">';
                    }
                    else {
                        htmlcontent += '<div class="panel-heading">';
                    }
                    htmlcontent += '<h4 class="panel-title">' +
                                   '<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapse' + colapsCtr + '">' +
                                   '' + item.CampaignName + '' +
                                   '<i class="indicator glyphicon glyphicon-chevron-down  pull-right"></i>  <span class="pull-right">Netword Type: ' + item.NetWorkType + ', Location: ' + item.Location + ', Budget: $ ' + item.Budget + '</span> </a> ' +
                                   '</h4> </div>';
                    //}
                    // alert(tempADGroup + ' # ' + item.AdGroupName)
                    //if (tempADGroup != item.AdGroupName) {
                    if (colapsCtr == 1) {
                        htmlcontent += '<div id="collapse' + colapsCtr + '" class="panel-collapse collapse in">';
                    }
                    else {
                        htmlcontent += '<div id="collapse' + colapsCtr + '" class="panel-collapse collapse">';
                    }
                    htmlcontent += '<div class="panel-body">' +
                                   '<div class="campaings-table table-responsive">' +

                               '<table>' +

                                   '<tr>' +

                                       '<th>Ad Groups</th>' +
                                       '<th>Status</th>' +
                                       '<th>Impressions</th>' +
                                       '<th>Clicks</th>' +
                                       '<th>CTR</th>' +
                                       '<th>Cost</th>' +
                                       '<th>Avg CPC</th>' +
                                       '<th>Conversions</th>' +
                                       '<th>Cost Per Conversion</th>' +

                                   '</tr>';
                }
                //alert(item.AdGroupName)
                htmlcontent += '<tr>' +

      				'<td><a href="#" >' + item.AdGroupName + '</a></td>' +
      				'<td></td>' +
      				'<td></td>' +
      				'<td></td>' +
      				'<td></td>' +
      				'<td></td>' +
      				'<td></td>' +
      				'<td></td>' +
      				'<td></td>' +


      			'</tr>';




                //if (tempADGroup != item.AdGroupName) {
                //  htmlcontent += '</table></div></div></div>';
                //   tempADGroup = item.AdGroupName;
                //}




                //if (tempCampaign != item.CampaignName ) {
                //    htmlcontent += '</table></div></div></div>';
                //    htmlcontent += '</div>';
                //    tempCampaign = item.CampaignName;
                //    htmlcontentRow = '';
                //}


            });
        }, async: false,

        error: function (data) {
            alert(data);
        }
    });
    htmlcontent += '</div></div></div></div>';

    $('#ADGroup_Result').html(htmlcontent);

}
function getAds(cCode, adGroup) {
    //alert(adGroup);
    var htmlcontent = "";
    var htmlcontentRow = "";
    var commInfo = "";
    $('#ADs_Result').empty();
    $('.ad-group-text').empty();

    $.ajax({
        url: "/Students/Home/GetADsData?cCode=" + cCode + "",
        method: 'GET',

        //data: { cCode: '1' },
        success: function (data) {

            htmlcontent = '<div class="row">' +
             '<div class="col-md-12">' +

               //'<div class="campaings-table">' +

                   '<div class="panel-group" id="accordion1">';


            var tempCampaign = '';
            var tempADGroup = '';
            var colapsCtr = 0;


            AdGroupsResult = $.grep(data, function (element, index) {

                return element.Parent == null && element.AdGroupCode == adGroup.replace('ALL', element.AdGroupCode);
                // return element.CampaignCode == 'CC0001'; //null;


            });

            $.each(AdGroupsResult, function (i, item) {


                colapsCtr = i;
                htmlcontent += '<div class="panel panel-default">';
                if (colapsCtr == 0) {
                    commInfo = item.CampaignName + ' <span class="pull-right">Netword Type: ' + item.NetWorkType + ', Location: ' + item.Location + ', Budget: $ ' + item.Budget + '</span>'
                    $('.ad-group-text').html(commInfo);
                    htmlcontent += '<div class="panel-heading active-panel">';
                }
                else {
                    htmlcontent += '<div class="panel-heading">';
                }
                htmlcontent += '<h4 class="panel-title">' +
                               '<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion1" href="#collapseAds' + colapsCtr + '">' +
                               '' + item.AdGroupName + '' +
                               '<i class="indicator glyphicon glyphicon-chevron-down  pull-right"></i>  </a> ' +
                               '</h4> </div>';

                if (colapsCtr == 0) {
                    htmlcontent += '<div id="collapseAds' + colapsCtr + '" class="panel-collapse collapse in">';
                }
                else {
                    htmlcontent += '<div id="collapseAds' + colapsCtr + '" class="panel-collapse collapse">';
                }

                htmlcontent += '<div class="panel-body">';


                htmlcontent += '<div id="myCarousel' + i + '" class="carousel slide" data-ride="carousel">';
                htmlcontent += '<div class="carousel-inner" role="listbox">';


                AdGroupsResultChild = $.grep(data, function (element, index) {

                    return element.Parent == item.AdGroupCode;

                });


                var l = 0;
                $.each(AdGroupsResultChild, function (k, childItem) {

                    // alert(childItem.Parent);
                    if (l == 0) {
                        htmlcontent += ' <div class="item active">' +
                            '<div class="item-slider">';
                    }
                    else if (l != 0 & l % 3 == 0) {


                        htmlcontent += '<div class="item">' +
                                        '<div class="item-slider">';
                    }



                    htmlcontent += ' <div class="item-list col-md-4">' +
                                                   '<a href=' + childItem.FinalUrl + '>' + childItem.ADText + '</a>' +
                                                  ' <span class="green-text">' + childItem.DispUrl + '</span>' +
                                                   '<span class="item-text">' + childItem.DescLine1 + '' + childItem.DescLine2 + '</span>' +
                                               '</div>';
                    l++;
                    if (l != 0 & l % 3 == 0) {
                        htmlcontent += '<div class="clearfix"></div>' +
                    '</div>' +
                '</div>';
                    }
                });

                htmlcontent += '</div>';
                htmlcontent += '<a class="left carousel-control" href="#myCarousel' + i + '" role="button" data-slide="prev">' +
                                        '<img src="/Content/images/arrow-left.png" class="arrow" aria-hidden="true">' +

                                        '<span class="sr-only">Previous</span>' +
                                    '</a>' +
                                    '<a class="right carousel-control" href="#myCarousel' + i + '" role="button" data-slide="next">' +
                                        '<img src="/Content/images/arrow-right.png" class="arrow" aria-hidden="true">' +
                                       ' <span class="sr-only">Next</span>' +
                                   ' </a>' +
                                '</div>';


                htmlcontent += '</div></div></div>';



            });

        }, async: false,

        error: function (data) {
            alert(data);
        }
    });
    //htmlcontent += '</div></div></div></div>';

    $('#ADs_Result').html(htmlcontent);

}
function getAdGroupsOnly(cCode) {

    $('#ddlADGroupName1').empty();
    $('#ddlADGroupName').empty();


    $('#ddlADGroupName1').append($('<option></option>').val("ALL").html("ALL Ad Groups"));
    $('#ddlADGroupName').append($('<option></option>').val("0").html("Select Ad Groups"));
    $.ajax({
        url: "/Students/Home/GetADGroupsDataDistinct?cCode=" + cCode + "",
        method: 'GET',
        success: function (data) {


            $.each(data, function (i, item) {

                $('#ddlADGroupName1').append($('<option></option>').val(item.AdGroupCode).html(item.AdGroupName))
                $('#ddlADGroupName').append($('<option></option>').val(item.AdGroupCode).html(item.AdGroupName))


            });
        }, async: false,

        error: function (data) {

            alert(data);
        }
    });


}
function IsNumeric(strString) {
    var strValidChars = "0123456789";
    var strChar;
    var blnResult = true;
    //var strSequence = document.frmQuestionDetail.txtSequence.value; 
    //test strString consists of valid characters listed above 
    if (strString.length == 0)
        return false;
    for (i = 0; i < strString.length && blnResult == true; i++) {
        strChar = strString.charAt(i);
        if (strValidChars.indexOf(strChar) == -1) {
            blnResult = false;
        }
    }
    return blnResult;
}
function isNumber(evt, element) {

    var charCode = (evt.which) ? evt.which : event.keyCode

    if (
        (charCode != 45 || $(element).val().indexOf('-') != -1) &&      // “-” CHECK MINUS, AND ONLY ONE.
        (charCode != 46 || $(element).val().indexOf('.') != -1) &&      // “.” CHECK DOT, AND ONLY ONE.
        (charCode < 48 || charCode > 57))
        return false;

    return true;
}